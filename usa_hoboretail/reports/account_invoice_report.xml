<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="invoice_document_usa">
        <t t-if="not company">
            <!-- Multicompany -->
            <t t-if="company_id">
                <t t-set="company" t-value="company_id"/>
            </t>
            <t t-elif="o and 'company_id' in o">
                <t t-set="company" t-value="o.company_id.sudo()"/>
            </t>
            <t t-else="else">
                <t t-set="company" t-value="res_company"/>
            </t>
        </t>
        <div class="header o_company_#{company.id}_layout" t-att-style="report_header_style">
            <div class="row">
                <div class="col-1 text-center">
                    <div style="border-right: 25px solid #f2da1c;height: 65px;margin-right:15px"/>
                    <div style="border-right: 25px solid #00d1d3;height: 65px;margin-right:15px"/>
                    <div style="border-right: 25px solid #fa4f4f;height: 65px;margin-right:15px"/>
                    <div style="border-right: 25px solid #9e00b9;height: 65px;margin-right:15px"/>
                </div>
                <div class="col-11">
                    <div class="row ">
                        <div class="col-8 mt-2">
                            <img t-if="company.logo" t-att-src="image_data_uri(company.logo)" class="float-left" alt="Logo"
                                 style="max-height:55px; height: 55px; max-width: 185px;width: 185px;"/>
                        </div>
                        <div class="col-4">
<!--                            <h1 style="color:#f2da1c">Invoice</h1>-->
                            <span style="color:#f2da1c; font-size: 50px">Invoice</span><br/>
                            <span t-esc="o.name" style="font-size: 26px"/>

                        </div>
                    </div>
                    <div class="row" style="font-size: 19px">
                        <div class="col-8">
                            <span>Invoice To</span>
                            <h5 t-esc="o.partner_id.name"/>
                            <t t-if="o.partner_id.street">
                                <span t-esc="o.partner_id.street"/>,
                            </t>
                            <t t-else="">
                                -,
                            </t>
                            <br/>
                            <t t-if="o.partner_id.city">
                                <span t-esc="o.partner_id.city"/>,
                            </t>
                            <t t-else="">
                                -,
                            </t>

                            <t t-if="o.partner_id.state_id">
                                <span t-esc="o.partner_id.state_id.name"/>,
                            </t>
                            <t t-else="">
                                -,
                            </t>
                            <span t-esc="o.partner_id.zip"/>
                            <br/>
                            <span t-esc="o.partner_id.phone"/>
                        </div>
                        <div class="col-4" style="text-align: justify !important">
                            <table class="table table-borderless table-sm">
                                <tbody>
                                    <tr>
                                        <td style="width:50%">
                                            <span>Invoice Date</span>
                                        </td>
                                        <td style="width:10%">:</td>
                                        <td class="text-right" tyle="width:40%">
                                            <t t-esc="o.format_date_usa(o.invoice_date)"/>
                                        </td>
                                    </tr>
                                     <tr>
                                        <td style="width:50%">Work Order</td>
                                        <td style="width:10%">:</td>
                                        <td class="text-right" style="width:40%">
                                            <t t-esc="o.work_order"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width:50%">W/O Date</td>
                                        <td style="width:10%">:</td>
                                        <td class="text-right" style="width:40%">
                                            <t t-esc="o.format_date_usa(o.work_order_date)"/>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="article o_report_layout_clean" t-att-data-oe-model="o and o._name" t-att-data-oe-id="o and o.id">
            <t t-set="o" t-value="o.with_context(lang=lang)"/>
            <div class="page" style="font-size:18px!important;font-weight: lighter !important;">
                <div class="row">
                    <div class="col-1"/>
                    <div class="col-11">
                        <div class="row">
                            <div class="col-12">
                                <table class="table table-striped table-sm">
                                    <thead>
                                        <tr style="font-size: 18px">
                                            <th style="width:75%">
                                                Item Descriptions
                                            </th>
                                            <th style="text-align: right;width:12%" t-if="o.show_qty_report">
                                                Quantity
                                            </th>
                                            <th style="text-align: right;width:12%">
                                                Unit Price
                                            </th>
                                            <th style="text-align: right;width:13%">
                                                Total
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody class="invoice_tbody">
                                        <t t-set="current_subtotal" t-value="0"/>
                                        <!--                                        <t t-set="lines" t-value="o.invoice_line_ids.sorted(key=lambda l: (-l.sequence, l.date, l.move_name, -l.id), reverse=True)"/>-->
                                        <t t-set="lines" t-value="o.invoice_line_ids"/>

                                        <t t-foreach="lines" t-as="line">
                                            <t t-set="current_subtotal" t-value="current_subtotal + line.price_subtotal" groups="account.group_show_line_subtotals_tax_excluded"/>
                                            <t t-set="current_subtotal" t-value="current_subtotal + line.price_total" groups="account.group_show_line_subtotals_tax_included"/>

                                            <tr t-att-class="'bg-200 fw-bold o_line_section' if line.display_type == 'line_section' else 'fst-italic o_line_note' if line.display_type == 'line_note' else ''">
                                                <t t-if="line.display_type == 'product'" name="account_invoice_line_accountable">
                                                    <td name="account_invoice_line_name">
                                                        <span t-field="line.name" t-options="{'widget': 'text'}"/>
                                                    </td>
                                                    <td t-attf-class="text-end {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}" t-if="o.show_qty_report">
                                                        <span class="text-nowrap" t-field="line.quantity"/>
                                                    </td>
                                                    <td t-attf-class="text-end {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                                        <span class="text-nowrap" t-field="line.price_unit"/>
                                                    </td>
                                                    <td class="text-end o_price_total">
                                                        <span class="text-nowrap" t-field="line.price_subtotal" groups="account.group_show_line_subtotals_tax_excluded"/>
                                                        <span class="text-nowrap" t-field="line.price_total" groups="account.group_show_line_subtotals_tax_included"/>
                                                    </td>
                                                </t>
                                                <t t-if="line.display_type == 'line_section'">
                                                    <td colspan="99">
                                                        <span t-field="line.name" t-options="{'widget': 'text'}"/>
                                                    </td>
                                                    <t t-set="current_section" t-value="line"/>
                                                    <t t-set="current_subtotal" t-value="0"/>
                                                </t>
                                                <t t-if="line.display_type == 'line_note'">
                                                    <td colspan="99">
                                                        <span t-field="line.name" t-options="{'widget': 'text'}"/>
                                                    </td>
                                                </t>
                                            </tr>
                                        </t>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <!--                        <t t-set="tax_totals" t-value="o.tax_totals"/>-->
                        <div class="row mt-2">
                            <div class="col-8">
                                <span>Payment Method</span>
                                <br/>
                                <span>Check to:</span>
                                <!--                                <span style="font-size: 20px">Hobo, Inc.</span>-->
                                <span>
                                    <strong>Hobo, Inc.</strong>
                                </span>
                                <br/>
                                <span style="color:#c0bfbf">(Please include the invoice number on your check)</span>
                                <br/>
                                <span>Terms &amp; Conditions</span>
                                <br/>
                                <span style="color:#c0bfbf">Total payment due in
                                    <t t-if="o.invoice_payment_term_id">
                                         <t t-esc="o.invoice_payment_term_id.line_ids[0].days"/>
                                    </t>
                                    <t t-elif="o.invoice_date_due and o.invoice_date">
                                         <t t-esc="(o.invoice_date_due - o.invoice_date).days"/>
                                    </t>
                                    <t t-else="">
                                        0
                                    </t>
                                    days
                                </span>
                            </div>
                            <div class="col-4">
                                <table class="table table-sm table-borderless" style="page-break-inside: avoid;">

                                    <!--Tax totals-->
                                    <t t-set="tax_totals" t-value="o.tax_totals"/>
                                    <t t-call="account.document_tax_totals"/>

                                    <!--Payments-->
                                    <t t-if="print_with_payments">
                                        <t t-if="o.payment_state != 'invoicing_legacy'">
                                            <t t-set="payments_vals" t-value="o.sudo().invoice_payments_widget and o.sudo().invoice_payments_widget['content'] or []"/>
                                            <t t-foreach="payments_vals" t-as="payment_vals">
                                                <tr t-if="payment_vals['is_exchange'] == 0">
                                                    <td>
                                                        <i class="oe_form_field text-end oe_payment_label">Paid on
                                                            <t t-esc="payment_vals['date']" t-options='{"widget": "date"}'/>
                                                        </i>
                                                    </td>
                                                    <td class="text-end">
                                                        <span t-esc="payment_vals['amount']" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                                                    </td>
                                                </tr>
                                            </t>
                                            <t t-if="len(payments_vals) > 0">
                                                <tr class="border-black">
                                                    <td>
                                                        <strong>Amount Due</strong>
                                                    </td>
                                                    <td class="text-end">
                                                        <span t-field="o.amount_residual"/>
                                                    </td>
                                                </tr>
                                            </t>
                                        </t>
                                    </t>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <!--FIN PAGE-->
            <div class="footer" style="font-size: 16px">
                <hr style="border: 3px solid #c0bfbf;"/>
                <div class="row">
                    <div class="col-12 text-center" style="color:#c0bfbf">
                        <span t-esc="company.phone"/>
                        <span style="color:#f2da1c">|</span>
                        <span t-esc="company.email"/>
                        <span style="color:#f2da1c">|</span>
                        <span t-esc="company.website"/>
                        <span style="color:#f2da1c">|</span>
                        17105 Amity Dr, Derwood, MD 20855
<!--                        <t t-if="company.street">-->
<!--                            <span t-esc="company.street"/>,-->
<!--                        </t>-->
<!--                        <t t-else="">-->
<!--                            -,-->
<!--                        </t>-->
<!--                        <t t-if="company.city">-->
<!--                            <span t-esc="company.city"/>,-->
<!--                        </t>-->
<!--                        <t t-else="">-->
<!--                            -,-->
<!--                        </t>-->

<!--                        <t t-if="company.state_id">-->
<!--                            <span t-esc="company.state_id.name"/>,-->
<!--                        </t>-->
<!--                        <t t-else="">-->
<!--                            -,-->
<!--                        </t>-->
                        <span t-esc="company.zip"/>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 text-center">
                        <p>
                            As part of a Retail Rollout program or simply a unique decorating facility; Window Displays, Fixtures Specializing in
                            Vinyl and Tinting applications or Wallcovering, Advertising and Decorative Vinyl, Assembly and installation of all
                            accessories of retail merchandising. Serving in DC | MD | VA | DE
                        </p>
                    </div>
                </div>

            </div>
        </div>
    </template>

    <template id="account.report_invoice_with_payments">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-set="lang" t-value="o.partner_id.lang"/>
                <t t-set="print_with_payments" t-value="True"/>
                <t t-call="usa_hoboretail.invoice_document_usa" t-lang="lang"/>
            </t>
        </t>
    </template>


    <record id="paperformat_invoice_custom" model="report.paperformat">
        <field name="name">Factura usa</field>
        <field name="default" eval="True"/>
        <field name="format">custom</field>
        <field name="page_height">297</field>
        <field name="page_width">210</field>
        <field name="orientation">Portrait</field>
        <field name="margin_top">68</field> <!-- la diferencia (margin_top - header_spacing) es el espacio que queda en la parte superior de la hoja-->
        <field name="header_spacing">55</field>
        <field name="margin_bottom">35</field>
        <field name="margin_left">17</field>
        <field name="margin_right">12</field>
        <field name="header_line" eval="False"/><!-- mostrar una linea en cabecera-->
        <field name="dpi">90</field>
    </record>

    <record id="account.account_invoices" model="ir.actions.report">
        <field name="paperformat_id" ref="paperformat_invoice_custom"/>
    </record>
    <record id="account.account_invoices_without_payment" model="ir.actions.report">
        <field name="paperformat_id" ref="paperformat_invoice_custom"/>
    </record>


</odoo>